import{c as le,d as v,o as n,a as m,w as s,r as $,u as e,O as re,b as ce,e as de,f as t,g as ie,h as B,m as V,i as ue,X as pe,j as _e,k as X,l as g,n as ee,p as fe,q as me,s as he,t as be,v as te,x as Y,y as q,z as ge,A as z,B as x,C as b,D as l,E as N,F as A,G as M,H as L,I as ve,_ as ye,J as we,K as xe,L as Q,M as se,N as oe,P as $e,Q as Ce,R as Se,S as Be,T as ke,U as Ve,V as je,W as Oe,Y as De,Z as Je,$ as Pe,a0 as Z,a1 as ze,a2 as Ne,a3 as Ae,a4 as Fe}from"./index-0LozPYKy.js";import{_ as ae}from"./ScrollArea.vue_vue_type_script_setup_true_lang-HsO_H1UU.js";import{_ as Me,a as Te,b as Ue,c as Le,d as qe,e as Ee,f as Ie,g as Re}from"./JobCard.vue_vue_type_script_setup_true_lang-YA51BFrg.js";import{_ as He}from"./Badge.vue_vue_type_script_setup_true_lang-Tymdlli1.js";import{_ as Ke,C as Ge}from"./Skeleton.vue_vue_type_script_setup_true_lang-eZAn_HhJ.js";import{C as We,_ as Ye}from"./BaseSearch.vue_vue_type_script_setup_true_lang-K-zY4Dt_.js";import{E as Ze}from"./constants--OwaCeTz.js";import"./Input.vue_vue_type_script_setup_true_lang-CRnS55Ql.js";import"./Label.vue_vue_type_script_setup_true_lang-uDSuRFS9.js";/**
 * @license lucide-vue-next v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qe=le("HeartIcon",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),Xe=v({__name:"Sheet",setup(r){return(o,a)=>(n(),m(e(re),null,{default:s(()=>[$(o.$slots,"default")]),_:3}))}}),et=v({__name:"SheetContent",props:{side:{},class:{},forceMount:{type:Boolean},trapFocus:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","dismiss","openAutoFocus","closeAutoFocus"],setup(r,{emit:o}){const a=r,u=ce(o),_=X("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b border-border data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t border-border data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r border-border data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l border-border data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}});return(f,y)=>(n(),m(e(_e),null,{default:s(()=>[t(e(de),{class:"fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0"}),t(e(ie),V({class:e(B)(e(_)({side:a.side}),a.class)},{...a,...e(u)}),{default:s(()=>[$(f.$slots,"default"),t(e(ue),{class:"absolute top-4 right-4 p-0.5 transition-colors rounded-md hover:bg-secondary"},{default:s(()=>[t(e(pe),{class:"w-4 h-4 text-muted-foreground"})]),_:1})]),_:3},16,["class"])]),_:3}))}}),tt=v({__name:"SheetHeader",props:{class:{}},setup(r){const o=r;return(a,d)=>(n(),g("div",{class:ee(e(B)("flex flex-col space-y-2 text-center sm:text-left",o.class))},[$(a.$slots,"default")],2))}}),st=v({__name:"SheetDescription",props:{asChild:{type:Boolean},as:{},class:{}},setup(r){const o=r;return(a,d)=>(n(),m(e(fe),V({class:e(B)("text-muted-foreground",o.class)},o),{default:s(()=>[$(a.$slots,"default")]),_:3},16,["class"]))}}),ot=v({__name:"SheetTitle",props:{asChild:{type:Boolean},as:{},class:{}},setup(r){const o=r;return(a,d)=>(n(),m(e(me),V({class:e(B)("text-2xl font-semibold text-foreground",o.class)},o),{default:s(()=>[$(a.$slots,"default")]),_:3},16,["class"]))}}),at={class:"pt-5 pb-2 flex gap-2 flex-wrap"},nt={class:"space-y-1"},lt={key:0,class:"text-destructive"},rt={key:2},ct={class:"space-y-2 mt-10"},dt=l("h3",{class:"text-xl"}," info ",-1),it={class:"grid grid-cols-3 gap-1"},ut=l("div",null,"username",-1),pt={class:"col-span-2"},_t=l("div",null,"address",-1),ft={class:"col-span-2"},mt=l("div",null,"is reviewer",-1),ht={class:"col-span-2"},bt={key:0,class:"space-y-5 mt-10"},gt={class:"text-xl"},vt={class:"flex flex-col gap-3"},yt={class:"space-y-2"},wt={class:"space-y-2"},xt={class:"-ml-2 flex gap-2"},$t=v({__name:"JobSheet",props:he({job:{}},{open:{type:Boolean,default:!1},openModifiers:{}}),emits:["update:open"],async setup(r){let o,a;const d=r,u=be(r,"open"),_=te(),f=([o,a]=Y(()=>_.getUserFactory()),o=await o,a(),o),y=([o,a]=Y(()=>_.getJobFactory()),o=await o,a(),o),w=q(),j=q([]);ge(()=>d.job.owner,()=>{w.value=void 0,j.value=[],f.getUser(d.job.owner).then(p=>{w.value={owner:p[0],userName:p[1],isJudge:p[2],jobIds:p[3].map(Number),escrowIds:p[4].map(Number)}}),y.getAllJobsOfUser(d.job.owner).then(p=>{j.value=p.map(i=>({owner:i[0],id:Number(i[1]),title:i[2],description:i[3],price:Number(i[4]),inProcess:i[5],tags:i[6]})).filter(i=>i.id!==d.job.id)})},{immediate:!0});const C=z(""),D=z("");async function E(){if(!C.value){D.value="message is required";return}const i=await(await y.sendBuyRequest(d.job.id,C.value)).wait();(i==null?void 0:i.status)===1&&(C.value="",u.value=!1)}async function J(){await y.deleteJob(d.job.id)}return(p,i)=>{const k=ot,c=st,P=tt,O=He,T=ye,I=Me,U=we,R=ae,H=et,K=Xe;return n(),m(K,{open:u.value,"onUpdate:open":i[1]||(i[1]=S=>u.value=S)},{default:s(()=>[t(H,{class:"sm:max-w-lg"},{default:s(()=>[t(P,null,{default:s(()=>[t(k,null,{default:s(()=>[x(b(p.job.title)+" #"+b(p.job.id),1)]),_:1}),t(c,null,{default:s(()=>[x(b(p.job.description),1)]),_:1})]),_:1}),l("div",at,[(n(!0),g(A,null,N(p.job.tags,(S,F)=>(n(),m(O,{key:F,variant:"secondary"},{default:s(()=>[x(b(S),1)]),_:2},1024))),128))]),t(T,null,{default:s(()=>[x(b(p.job.price),1)]),_:1}),p.job.owner.toLowerCase()!==e(_).address.toLowerCase()?(n(),g("form",{key:0,class:"mt-3 space-y-3",onSubmit:ve(E,["prevent"])},[l("div",nt,[t(I,{modelValue:e(C),"onUpdate:modelValue":i[0]||(i[0]=S=>M(C)?C.value=S:null),placeholder:"leave a message"},null,8,["modelValue"]),e(D)?(n(),g("p",lt,b(e(D)),1)):L("",!0)]),t(U,{class:"w-full",type:"submit"},{default:s(()=>[x(" send ")]),_:1})],32)):(n(),m(U,{key:1,class:"w-full mt-3",variant:"destructive",onClick:J},{default:s(()=>[x(" delete ")]),_:1})),e(w)?(n(),g("div",rt,[l("div",ct,[dt,l("div",it,[ut,l("div",pt,[t(O,{variant:"outline"},{default:s(()=>[x(b(e(w).userName),1)]),_:1})]),_t,l("div",ft,[t(O,{variant:"outline"},{default:s(()=>[x(b(e(w).owner),1)]),_:1})]),mt,l("div",ht,[t(O,{variant:"outline"},{default:s(()=>[x(b(e(w).isJudge?"yes":"no"),1)]),_:1})])])]),e(j).length?(n(),g("div",bt,[l("h3",gt," more from @"+b(e(w).userName),1),t(R,{class:"h-[400px]"},{default:s(()=>[l("ul",vt,[(n(!0),g(A,null,N(e(j),(S,F)=>(n(),g("li",{key:F,class:"px-3 py-2 rounded-md border"},[l("div",yt,[l("div",wt,[l("p",null,b(S.title),1),l("ul",xt,[(n(!0),g(A,null,N(S.tags,(G,W)=>(n(),g("li",{key:W},[t(O,{variant:"outline"},{default:s(()=>[x(b(G),1)]),_:2},1024)]))),128))])]),t(T,null,{default:s(()=>[x(b(S.price),1)]),_:2},1024)])]))),128))])]),_:1})])):L("",!0)])):L("",!0)]),_:1})]),_:1},8,["open"])}}}),Ct={},St={class:"flex justify-between"},Bt={class:"flex gap-2 flex-wrap"};function kt(r,o){const a=Ke,d=Te,u=Ue,_=Le,f=qe,y=Ee,w=Ie;return n(),m(w,{class:"group-hover:border-primary transition-colors"},{default:s(()=>[t(_,null,{default:s(()=>[t(d,null,{default:s(()=>[l("div",St,[t(a,{class:"h-4 w-[200px]"})])]),_:1}),t(u,{class:"pt-2 flex gap-2"},{default:s(()=>[t(a,{class:"h-4 w-[80px]"}),t(a,{class:"h-4 w-[50px]"})]),_:1})]),_:1}),t(f,null,{default:s(()=>[l("div",Bt,[t(a,{class:"h-4 w-[60%]"}),t(a,{class:"h-4 w-[35%]"}),t(a,{class:"h-4 w-[45%]"}),t(a,{class:"h-4 w-[50%]"}),t(a,{class:"h-4 w-[70%]"})])]),_:1}),t(y,null,{default:s(()=>[t(a,{class:"h-4 w-[15%]"})]),_:1})]),_:1})}const Vt=xe(Ct,[["render",kt]]),jt=v({__name:"Select",props:{open:{type:Boolean},defaultOpen:{type:Boolean},defaultValue:{},modelValue:{},orientation:{},dir:{},name:{},autocomplete:{},disabled:{type:Boolean},required:{type:Boolean}},emits:["update:modelValue","update:open"],setup(r,{emit:o}){const u=Q(r,o);return(_,f)=>(n(),m(e($e),se(oe(e(u))),{default:s(()=>[$(_.$slots,"default")]),_:3},16))}}),Ot=v({__name:"SelectContent",props:{forceMount:{type:Boolean},position:{default:"popper"},side:{},sideOffset:{default:4},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},updatePositionStrategy:{},onPlaced:{},prioritizePosition:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},emits:["closeAutoFocus","escapeKeyDown","pointerDownOutside"],setup(r,{emit:o}){const a=r,u=Q(a,o);return(_,f)=>(n(),m(e(Be),null,{default:s(()=>[t(e(Ce),V({...e(u),..._.$attrs},{class:e(B)("relative z-50 min-w-[10rem] overflow-hidden rounded-md bg-background border border-border text-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",_.position==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a.class)}),{default:s(()=>[t(e(Se),{class:ee(e(B)("p-1",_.position==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"))},{default:s(()=>[$(_.$slots,"default")]),_:3},8,["class"])]),_:3},16,["class"])]),_:3}))}}),Dt=v({__name:"SelectGroup",props:{asChild:{type:Boolean},as:{},class:{}},setup(r){const o=r;return(a,d)=>(n(),m(e(ke),V({class:e(B)("p-1 w-full",o.class)},o),{default:s(()=>[$(a.$slots,"default")]),_:3},16,["class"]))}}),Jt={class:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center"},Pt=v({__name:"SelectItem",props:{value:{},disabled:{type:Boolean},textValue:{},asChild:{type:Boolean},as:{},class:{}},setup(r){const o=r;return(a,d)=>(n(),m(e(Oe),V(o,{class:e(B)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",o.class)}),{default:s(()=>[l("span",Jt,[t(e(Ve),null,{default:s(()=>[t(e(We),{class:"h-4 w-4"})]),_:1})]),t(e(je),null,{default:s(()=>[$(a.$slots,"default")]),_:3})]),_:3},16,["class"]))}}),zt=v({__name:"SelectTrigger",props:{disabled:{type:Boolean},asChild:{type:Boolean},as:{},class:{default:""},invalid:{type:Boolean,default:!1}},setup(r){const o=r;return(a,d)=>(n(),m(e(Je),V(o,{class:[e(B)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",o.class),o.invalid?"!ring-destructive ring-2 placeholder:!text-destructive":""]}),{default:s(()=>[$(a.$slots,"default"),t(e(De),{"as-child":""},{default:s(()=>[t(e(Ge),{class:"w-4 h-4 opacity-50"})]),_:1})]),_:3},16,["class"]))}}),Nt=v({__name:"SelectValue",props:{placeholder:{},asChild:{type:Boolean},as:{}},setup(r){const o=r;return(a,d)=>(n(),m(e(Pe),se(oe(o)),{default:s(()=>[$(a.$slots,"default")]),_:3},16))}}),At=X("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground"},size:{default:"h-10 px-3",sm:"h-9 px-2.5",lg:"h-11 px-5"}},defaultVariants:{variant:"default",size:"default"}}),Ft=v({__name:"Toggle",props:{variant:{default:"default"},size:{default:"default"},disabled:{type:Boolean,default:!1},defaultValue:{type:Boolean},pressed:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["update:pressed"],setup(r,{emit:o}){const a=r,d=o,u=Z(()=>{const{variant:f,size:y,disabled:w,...j}=a;return j}),_=Q(u,d);return(f,y)=>(n(),m(e(ze),V(e(_),{class:e(B)(e(At)({variant:f.variant,size:f.size,class:f.$attrs.class??""})),disabled:a.disabled}),{default:s(()=>[$(f.$slots,"default")]),_:3},16,["class","disabled"]))}}),Mt={class:"py-10"},Tt={class:"py-8 space-y-8"},Ut={class:"flex justify-between items-center"},Lt={class:"flex items-center gap-3"},qt=l("h1",{class:"text-4xl"}," jobs ",-1),Et={class:"flex items-center whitespace-nowrap gap-2"},It=l("span",{class:"text-muted-foreground"}," sort by: ",-1),Rt={class:"min-w-[200px]"},Ht={class:"grid grid-cols-3 gap-6"},os=v({__name:"index",async setup(r){let o,a;const d=te(),u=z(""),_=Ne(u,500),f=z(!1),y=z("lth"),w=[{label:"price: low to high",value:"lth"},{label:"price: hight to low",value:"htl"}],j=([o,a]=Y(()=>d.getJobFactory()),o=await o,a(),o),C=q([]),D=Z(()=>f.value?C.value.filter(k=>k.owner.toLowerCase()===d.address.toLowerCase()):C.value),E=Z(()=>(_.value?D.value.filter(c=>JSON.stringify(c).toLowerCase().includes(u.value.toLowerCase())):D.value).sort((c,P)=>y.value==="lth"?c.price-P.price:P.price-c.price));Ae(()=>{j.getAllJobs().then(k=>{C.value=k.filter(c=>c[0]!==Ze).map(c=>({owner:c[0],id:Number(c[1]),title:c[2],description:c[3],price:Number(c[4]),inProcess:c[5],tags:c[6]}))})});const J=z(!1),p=q();function i(k){p.value=k,J.value=!0}return(k,c)=>{const P=Ye,O=Ft,T=Nt,I=zt,U=Pt,R=Dt,H=Ot,K=jt,S=Re,F=Vt,G=ae,W=$t;return n(),g("div",null,[l("div",Mt,[t(P,{modelValue:e(u),"onUpdate:modelValue":c[0]||(c[0]=h=>M(u)?u.value=h:null),placeholder:"search for job title or keyword"},null,8,["modelValue"])]),l("div",Tt,[l("div",Ut,[l("div",Lt,[qt,t(O,{pressed:e(f),"onUpdate:pressed":c[1]||(c[1]=h=>M(f)?f.value=h:null),"aria-label":"toggle my job only"},{default:s(()=>[t(e(Qe),{size:20})]),_:1},8,["pressed"])]),l("div",Et,[It,l("div",Rt,[t(K,{modelValue:e(y),"onUpdate:modelValue":c[2]||(c[2]=h=>M(y)?y.value=h:null)},{default:s(()=>[t(I,null,{default:s(()=>[t(T)]),_:1}),t(H,null,{default:s(()=>[t(R,null,{default:s(()=>[(n(),g(A,null,N(w,h=>t(U,{key:h.value,value:h.value},{default:s(()=>[x(b(h.label),1)]),_:2},1032,["value"])),64))]),_:1})]),_:1})]),_:1},8,["modelValue"])])])]),t(G,{class:"h-[800px]"},{default:s(()=>[l("div",Ht,[e(C).length?(n(!0),g(A,{key:0},N(e(E),(h,ne)=>(n(),m(S,V({key:ne},h,{onClick:Kt=>i(h)}),null,16,["onClick"]))),128)):(n(),g(A,{key:1},N(5,h=>t(F,{key:h})),64))])]),_:1})]),e(p)?(n(),m(Fe,{key:0},[t(W,{open:e(J),"onUpdate:open":c[3]||(c[3]=h=>M(J)?J.value=h:null),job:e(p)},null,8,["open","job"])],1024)):L("",!0)])}}});export{os as default};
